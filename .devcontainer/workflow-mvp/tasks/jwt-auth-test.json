{
  "workflow": {
    "id": "jwt-auth-test",
    "description": "为系统添加 JWT 认证和角色权限控制",
    "tasks": [
      {
        "id": "setup-branch",
        "type": "git",
        "command": "worktree add -b feature/auth/jwt-rbac ./worktrees/jwt-auth main",
        "depends_on": []
      },
      {
        "id": "install-deps",
        "type": "shell",
        "command": "cd ./worktrees/jwt-auth && bun install",
        "depends_on": ["setup-branch"]
      },
      {
        "id": "build-core-deps",
        "type": "shell",
        "command": "cd ./worktrees/jwt-auth && bun run build --filter=@linchkit/core --filter=@linchkit/schema",
        "depends_on": ["install-deps"]
      },
      {
        "id": "update-auth-package",
        "type": "shell",
        "command": "cd ./worktrees/jwt-auth && echo 'TODO: 更新 @linchkit/auth 包以支持 JWT'",
        "depends_on": ["build-core-deps"]
      },
      {
        "id": "add-jwt-middleware",
        "type": "shell",
        "command": "cd ./worktrees/jwt-auth && echo 'TODO: 添加 JWT 中间件'",
        "depends_on": ["update-auth-package"]
      },
      {
        "id": "implement-rbac",
        "type": "shell",
        "command": "cd ./worktrees/jwt-auth && echo 'TODO: 实现角色权限控制'",
        "depends_on": ["add-jwt-middleware"]
      },
      {
        "id": "run-tests",
        "type": "shell",
        "command": "cd ./worktrees/jwt-auth && bun test --filter=@linchkit/auth",
        "depends_on": ["implement-rbac"]
      },
      {
        "id": "lint-check",
        "type": "shell",
        "command": "cd ./worktrees/jwt-auth && bun run lint",
        "depends_on": ["run-tests"]
      }
    ]
  }
}
