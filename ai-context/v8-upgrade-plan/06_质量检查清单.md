# LinchKit v8.0 质量检查清单

**版本**: v8.0 - AI代码质量保证  
**目标大小**: ≤1KB  
**用途**: 任务执行前、中、后的强制检查  
**更新时间**: 2025-01-11

## 🔴 任务开始前 (必须100%完成)

### 环境状态检查

- [ ] `git branch --show-current` ≠ main/master/develop
- [ ] `git status` 工作目录干净
- [ ] `bun --version` 包管理器可用

### Graph RAG 上下文查询

- [ ] `bun run ai:session query "[核心概念]"`
- [ ] `bun run ai:session symbol "[类/函数名]"` (如适用)
- [ ] `bun run deps:check "[功能关键词]"`

### 任务规划确认

- [ ] 复杂任务 (3+步) 使用 `TodoWrite` 跟踪
- [ ] 确认无重复现有实现
- [ ] 明确测试覆盖率要求 (核心95%+/其他90%+)

## 🎯 开发过程中 (持续检查)

### 代码质量要求

- [ ] 无 `any` 类型 (使用 `unknown`)
- [ ] 无 `as` 类型断言 (使用类型守卫)
- [ ] 无 `@ts-ignore` (修复类型错误)
- [ ] 所有输入用 Zod Schema 验证

### 错误处理完整性

- [ ] 异步操作有 try-catch 或 Result 类型
- [ ] 边界条件有验证 (数组访问、对象属性)
- [ ] 使用 `@linch-kit/core` 日志系统
- [ ] 资源正确释放

## ✅ 任务完成前 (质量门禁)

### 自动化验证 (必须全部通过)

- [ ] `bun run validate:light` 通过
- [ ] `bun test` 全部通过
- [ ] `bun build` 成功
- [ ] `bun test --coverage` 达标

### 手动检查确认

- [ ] 代码符合 LinchKit 架构规范
- [ ] 测试覆盖关键路径和边界条件
- [ ] 使用 LinchKit 内部包 (无重复实现)
- [ ] 提交信息格式正确

## 🚨 检查失败处理

### 零容忍原则

- **不跳过任何检查** - 必须修复问题后继续
- **不强制通过** - 解决根本原因，不绕过验证
- **不降低标准** - 保持质量要求一致性

### 常见问题快速解决

```bash
# Graph RAG 查询失败
bun run ai:session query "test"  # 测试连接

# 类型错误
# 使用类型守卫替代类型断言

# ESLint 错误
bun run lint:fix  # 自动修复

# 测试失败
bun test --verbose  # 查看详细错误

# 构建失败
bun build --verbose  # 查看构建日志
```

### 应急资源

- 查看: `ai-context/02_Guides/01_Development_Workflow.md`
- 查询: `bun run ai:session query "[问题关键词]"`
- 参考: `ai-context/03_Reference/05_Command_Reference.md`

---

**使用方法**: 每个任务严格按清单执行  
**检查频率**: 开始前、过程中、完成前  
**质量保证**: 所有项目必须 ✅ 才能继续  
**持续改进**: 基于使用反馈定期优化
