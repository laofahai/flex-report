# LinchKit 任务复杂度级别定义

## 概述

本文档定义了 LinchKit 项目中任务复杂度的三个级别，用于指导 Claude AI 进行智能评估和相应的设计流程选择。

## 任务级别详细定义

### T1 级别：豁免级 (Exempt Level)

**定义**：简单的修复、微调和维护性任务

**特征**：
- **影响范围**：1-3 个文件
- **预计时间**：< 2 小时
- **架构影响**：无架构变更
- **设计需求**：无需设计，有清晰的实现路径
- **测试复杂度**：简单或无需额外测试

**典型任务示例**：
- 修复拼写错误、文档更新
- 调整 CSS 样式、UI 微调
- 增加代码注释或日志
- 修复明显的语法错误
- 简单的配置参数调整
- 修复明确的单行或几行代码bug

**处理流程**：
- 跳过设计阶段
- 直接基于 Graph RAG 查询结果进行编码
- 快速验证和测试

---

### T2 级别：轻量级 (Lite Level)

**定义**：功能增强、局部重构和中等复杂度的任务

**特征**：
- **影响范围**：单个包内的多个文件，或跨包的少量文件
- **预计时间**：2-8 小时
- **架构影响**：局部架构调整，但不涉及核心设计变更
- **设计需求**：需要简要设计规划
- **测试复杂度**：需要一定的测试覆盖

**典型任务示例**：
- 为现有组件增加新的 props 或功能
- 重构单个模块或组件的内部实现
- 修复涉及多个文件的逻辑bug
- 优化性能（不涉及架构变更）
- 增强现有 API 的功能
- 修改数据处理逻辑
- 改进现有 UI 交互体验

**处理流程**：
1. 生成简要设计计划（变更点、影响范围、实现要点）
2. 用户快速确认（< 5 分钟审阅）
3. 实施编码
4. 事后（可选）更新相关文档

---

### T3 级别：强制级 (Full Level)

**定义**：新功能开发、架构变更和高复杂度任务

**特征**：
- **影响范围**：跨多个核心包，或引入新的依赖/模块
- **预计时间**：> 1 天（8+ 小时）
- **架构影响**：涉及核心架构变更、新模块设计或重大重构
- **设计需求**：必须进行完整的方案设计
- **测试复杂度**：需要全面的测试策略和覆盖

**典型任务示例**：
- 实现全新的功能模块
- 添加新的页面或完整的用户流程
- 集成第三方 API 或服务
- 重大的架构重构或技术栈升级
- 新增核心包或扩展
- 实现复杂的业务逻辑算法
- 数据库 Schema 变更
- 安全相关的重大改进

**处理流程**：
1. 生成详细设计方案（目标确认、影响范围、核心设计、待更新文档、测试策略）
2. 用户审批（可能需要多轮修改）
3. 事前更新设计文档
4. 实施编码
5. 全面测试验证

## 评估指导原则

### 判断维度

Claude AI 在评估任务复杂度时应综合考虑以下维度：

1. **代码变更量**：通过 Graph RAG 查询了解相关文件数量和复杂度
2. **架构影响**：是否涉及核心设计原则或依赖关系变更
3. **业务复杂度**：任务的业务逻辑复杂程度
4. **技术风险**：实现的技术难度和潜在风险
5. **测试需求**：需要的测试覆盖范围和复杂度
6. **文档影响**：是否需要更新架构或设计文档

### 边界情况处理

- **倾向保守**：当在两个级别之间犹豫时，选择更高的级别
- **用户意图优先**：如果用户明确表达了对复杂度的判断，优先考虑用户意见
- **项目上下文**：考虑当前项目状态和技术债务情况

### 特殊考虑

- **LinchKit 特性**：考虑 AI-First 架构、Extension 系统等特殊性
- **依赖关系**：重点关注 @linch-kit 核心包之间的依赖影响
- **向后兼容**：评估对现有功能和 API 的兼容性影响

## 输出格式要求

Claude AI 必须以以下 JSON 格式输出评估结果：

```json
{
  "taskLevel": "T1|T2|T3",
  "confidence": "high|medium|low",
  "reasoning": "详细的判断理由，包括考虑的关键因素",
  "estimatedFilesToChange": 5,
  "potentialRisks": [
    "风险1描述",
    "风险2描述"
  ],
  "recommendedActions": [
    "建议的具体行动1",
    "建议的具体行动2"
  ],
  "graphRagFindings": "基于Graph RAG查询的关键发现总结"
}
```

## 版本历史

- **v1.0** (2025-07-10): 初始版本，定义三级任务复杂度标准