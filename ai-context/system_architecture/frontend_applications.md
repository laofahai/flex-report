# 前端应用架构设计

## 🎯 应用架构原则

### 1. 分层架构
```
┌─────────────────────────────────────────┐
│ 应用层 (apps/)                           │
│ ├─ starter (企业级应用外壳)              │
│ ├─ website (文档平台)                    │
│ └─ demo-app (功能演示)                   │
├─────────────────────────────────────────┤
│ 功能模块层 (modules/)                   │
│ ├─ console (管理后台功能)               │
│ └─ [其他业务模块]                       │
├─────────────────────────────────────────┤
│ 组件库层 (@linch-kit/ui)                │
│ ├─ 基础组件 (shadcn/ui)                 │
│ ├─ 业务组件                             │
│ └─ 布局组件                             │
├─────────────────────────────────────────┤
│ 核心包层 (core/schema/auth/crud/trpc)   │
│ ├─ 类型定义                             │
│ ├─ 业务逻辑                             │
│ └─ 基础服务                             │
└─────────────────────────────────────────┘
```

### 2. 职责分离
- **apps/starter** - 企业级应用外壳，提供多标签页工作区
- **modules/console** - 管理功能模块，提供页面和组件
- **@linch-kit/ui** - 可复用的 UI 组件库

## 📱 starter 应用架构

### 设计目标
- 提供类似 VSCode 的多标签页工作区体验
- 支持多模块集成的企业级应用框架
- 统一的导航、状态管理和用户体验

### 核心特性需求
1. **多标签页工作区** - 同时打开多个页面，快速切换
2. **插件化路由** - 模块可以注册自己的路由和标签页
3. **统一状态管理** - 跨标签页的状态同步
4. **响应式布局** - 适配不同屏幕尺寸

### 技术选型标准
- **状态管理**: Zustand (轻量、类型安全)
- **路由系统**: Next.js 15 App Router + 并行路由
- **UI组件**: @linch-kit/ui + shadcn/ui
- **样式方案**: Tailwind CSS 4 + CSS变量

## 🏗️ 设计文档要求

### 新功能开发前必须有 DESIGN.md
每个应用和模块必须在开发前创建详细的设计文档：

#### 应用级设计文档 (apps/*/DESIGN.md)
- **用户体验设计** - 交互流程、视觉设计
- **架构设计** - 组件层次、状态管理、路由设计
- **集成方案** - 与其他模块的集成方式
- **性能考量** - 加载策略、缓存策略

#### 模块级设计文档 (modules/*/DESIGN.md)
- **功能规范** - 提供的功能和接口
- **组件设计** - 组件层次和接口定义
- **数据流设计** - 状态管理和数据流转
- **集成接口** - 与外部系统的集成方式

### 设计协商流程
1. **现状分析** - 分析现有代码结构和需求
2. **技术调研** - 查阅相关文档和最佳实践
3. **Gemini协商** - 与 Gemini 协商架构方案
4. **设计生成** - 生成详细设计文档
5. **用户确认** - 获得用户确认后开始开发

## 🎨 用户体验设计标准

### 多标签页工作区设计
- **标签页管理** - 创建、关闭、切换、排序
- **状态持久化** - 刷新后恢复标签页状态
- **性能优化** - 懒加载、虚拟化、内存管理
- **交互体验** - 拖拽、右键菜单、快捷键

### 响应式设计
- **桌面端** - 完整的多标签页体验
- **平板端** - 适配触摸操作
- **移动端** - 简化的单页面体验

## 🔧 开发工具链

### 必须使用的工具
- **包管理**: bun
- **类型检查**: TypeScript 严格模式
- **代码规范**: ESLint + Prettier
- **构建工具**: Next.js 15 + Turbo

### 质量标准
- **类型覆盖**: 100% TypeScript
- **测试覆盖**: 应用级 >70%, 组件级 >80%
- **性能指标**: 首屏加载 <2s, 标签页切换 <200ms
- **兼容性**: 支持现代浏览器 (Chrome/Firefox/Safari/Edge)

## 📋 开发检查清单

### 设计阶段
- [ ] 存在完整的 DESIGN.md 文档
- [ ] 通过 Gemini 协商确认最佳实践
- [ ] 用户确认设计方案
- [ ] 更新相关架构文档

### 开发阶段
- [ ] 严格按照设计文档实现
- [ ] 使用 LinchKit 内部包功能
- [ ] 遵循代码规范和类型约束
- [ ] 实时更新 TODO 任务状态

### 验证阶段
- [ ] 通过所有类型检查
- [ ] 通过所有测试用例
- [ ] 满足性能标准
- [ ] 用户体验验证通过

这个架构文档确保了前端应用的设计质量和开发效率，为企业级应用提供了清晰的指导原则。