# LinchKit 下一阶段开发计划

**制定时间**: 2025-07-03  
**状态**: 基于双AI协商确认  
**转向**: 从"构建框架"转向"优化应用体验"

## 🎯 核心策略转变

### 发展阶段转换
- **Phase 1-10.1**: 完成框架核心架构 ✅
- **Phase 10.2+**: 专注用户体验和企业级功能完善

### 关键决策
1. **暂停新包开发**: 维持6+1稳定架构
2. **优化现有应用**: 重点提升apps/starter体验
3. **强化Console模块**: 完善企业级管理功能
4. **用户体验优先**: 多标签页、全局搜索等核心交互

## 🚀 三阶段实施计划

### 阶段一：核心体验升级 (极高优先级, 3-4周)

#### 1. 多标签页工作区布局 (1-2周)
**目标**: 实现企业级应用的核心交互体验
- **技术栈**: Zustand + Next.js 并行路由
- **功能特性**: 
  - 类似VSCode的多Tab工作模式
  - 标签页拖拽排序、固定、关闭
  - localStorage状态持久化
  - 左右滚动支持

#### 2. 插件化全局搜索 (1周)
**目标**: Command Palette风格的全局搜索
- **技术栈**: cmdk + SearchProvider接口
- **集成点**: @linch-kit/core中定义接口
- **功能**: Cmd+K/Ctrl+K快捷键，动态内容注册

#### 3. Console搜索API集成 (3-5天)
**目标**: 为Console模块提供搜索能力
- **实现**: 专门的tRPC搜索procedure
- **范围**: 租户、用户、权限、插件管理
- **格式**: 标准SearchResult接口

#### 4. 路由集成规范 (2-3天)
**目标**: 确保组件间协同工作
- **职责分离**: starter负责外壳，console负责内容
- **状态同步**: 标签页标题与页面内容同步

### 阶段二：Console模块功能完善 (中优先级, 2-3周)

#### 5. Console内部开发
**基础**: 严格按照modules/console/DESIGN.md执行
- **当前状态**: Phase 1完成，进入Phase 2
- **重点功能**:
  - 租户管理CRUD界面
  - 用户权限管理界面  
  - 系统监控面板
  - 插件市场界面

### 阶段三：用户体验完善 (中低优先级, 1-2周)

#### 6. 企业级主题定制
- 租户级别的品牌定制
- 主题色彩和Logo自定义
- 配置动态应用

#### 7. 统一通知系统
- react-hot-toast集成
- useNotifier hook提供
- tRPC操作自动反馈

#### 8. 数据密度切换
- 表格"舒适"/"紧凑"视图
- 响应式密度适配

## 📋 职责边界重新定义

### Console模块定位确认
- **角色**: 功能库(Library)，非独立应用
- **使用方式**: 通过npm包被starter集成
- **设计原则**: 
  - 不包含数据库逻辑
  - 不处理认证流程
  - 专注管理功能UI和业务逻辑

### Starter vs Console职责分工

**Starter应用职责**:
- 应用外壳和布局容器
- 多标签页管理逻辑
- 全局搜索框UI
- 主导航和路由入口
- 用户认证和会话管理

**Console模块职责**:
- 企业级管理功能UI
- tRPC搜索API提供
- 可嵌入的页面组件
- 租户/用户/权限管理逻辑

## 🛠️ 技术实现要点

### 优先使用成熟第三方库
- **状态管理**: Zustand (轻量级)
- **搜索组件**: cmdk (shadcn/ui推荐)
- **通知系统**: react-hot-toast
- **路由**: Next.js 15并行路由特性

### 开发规范坚持
- **严格遵循**: development-constraints.md
- **包功能复用**: 必须使用LinchKit内部包
- **质量标准**: 测试覆盖率>80%，构建时间<10秒
- **Context7优先**: 第三方技术必须查询最新文档

## 📅 时间线和里程碑

### 短期目标 (1-2周)
- [ ] 多标签页布局基础实现
- [ ] 全局搜索组件集成
- [ ] Console搜索API开发

### 中期目标 (3-5周)
- [ ] 标签页高级功能(拖拽、固定)
- [ ] Console管理界面完善
- [ ] 企业级主题系统

### 长期目标 (6-8周)
- [ ] 完整用户体验测试
- [ ] 性能优化和稳定性
- [ ] 文档和示例完善

## 🎯 成功指标

### 用户体验指标
- **工作效率**: 多页面同时操作，快速切换
- **功能发现**: 全局搜索快速定位任何功能
- **视觉一致**: 企业级品牌定制

### 技术质量指标
- **性能**: 标签页切换<200ms，搜索响应<500ms
- **稳定性**: 无构建错误，完整测试覆盖
- **兼容性**: 主流浏览器支持，响应式设计

### 架构清晰度
- **职责分离**: starter和console边界明确
- **接口标准**: SearchProvider可被其他模块复用
- **扩展性**: 新模块轻松集成多标签页和搜索

## 💡 关键决策记录

1. **多Tab vs Breadcrumb**: 经双AI协商，多Tab更适合企业应用
2. **Console定位**: 确认为功能库，集成到starter使用
3. **搜索架构**: 插件化设计，支持多模块联邦搜索
4. **技术选型**: 优先成熟第三方库，避免重复造轮子
5. **开发顺序**: 用户体验升级优先于内部功能完善

这个计划将LinchKit从一个技术框架转化为一个真正可用的企业级应用平台。