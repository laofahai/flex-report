# 开发路线图

## 🎯 总体目标

构建基于 Odoo 理念的运行时插件系统，支持企业级应用的模块化开发和部署。

## 🗓️ 分阶段实施计划

### 阶段 1: 基础设施完善 ✅ **已完成**

#### 1.1 权限系统模块化 ✅ 已完成
**目标**: 调整 `@linch-kit/auth-core` 支持模块化权限

**完成任务**:
- ✅ 设计模块化权限接口
- ✅ 实现权限注册和合并机制
- ✅ 与 tRPC 中间件集成
- ✅ 权限扩展点设计
- ✅ 单元测试和文档

**交付物**:
- ✅ 更新的 `@linch-kit/auth-core` 包
- ✅ 权限系统设计文档
- ✅ 使用示例和测试用例

#### 1.2 CRUD 组件包设计 ✅ 已完成
**目标**: 设计 `@linch-kit/crud` 架构和实施计划

**完成任务**:
- ✅ 包结构设计和架构决策
- ✅ 核心 API 设计 (CRUDManager + Operations)
- ✅ 权限集成策略设计
- ✅ Schema 集成方案设计
- ✅ UI 组件架构设计
- ✅ 实施计划制定
- ✅ 详细文档编写

**交付物**:
- ✅ CRUD 包设计文档
- ✅ 实施计划
- ✅ 架构决策文档

#### 1.3 CRUD 核心包开发 ✅ 已完成
**目标**: 实现 `@linch-kit/crud` 核心逻辑包

**完成任务**:
- ✅ 包基础设施创建
- ✅ 核心类型定义 (完整的类型系统)
- ✅ CRUDManager 类实现 (链式 API + 事件系统)
- ✅ CRUD 操作实现 (基础 + 批量 + 高级操作)
- ✅ 权限集成实现 (操作级 + 字段级 + 行级权限)
- ✅ Schema 集成实现 (自动配置生成)
- ✅ tRPC 集成实现 (路由生成器 + 中间件)
- ✅ 状态管理实现 (完整状态管理 + 事件驱动)
- ✅ 工厂函数和便捷 API (多种创建方式)

**交付物**:
- ✅ `@linch-kit/crud` 核心包 (完全可用)
- ✅ 完整的类型系统 (端到端类型安全)
- ✅ tRPC 深度集成 (自动路由生成)
- ✅ 内存和 REST 数据源实现

### 阶段 2: 功能验证和 UI 组件 🔄 **进行中**

#### 2.1 Starter 应用验证 🔄 **当前任务**
**目标**: 通过完整的用户管理功能验证各包集成

**进行中任务**:
- [ ] 实现完整的用户注册/登录流程
- [ ] 验证数据库操作和 Prisma 集成
- [ ] 验证 CLI 命令功能
- [ ] 验证包之间的协作

**预期交付物**:
- 完整的用户管理系统
- 验证报告
- 集成测试用例

#### 2.2 tRPC 包完善 📋 **下一个任务**
**目标**: 完成 `@linch-kit/trpc` 包开发

**待完成任务**:
- [ ] tRPC 集成和配置
- [ ] 类型安全的 API 层
- [ ] 与其他包的集成测试

**预期交付物**:
- `@linch-kit/trpc` 包
- API 层文档
- 集成示例

#### 2.3 CRUD UI 包开发 📋 **依赖: 完成 Starter 验证**
**目标**: 实现 `@linch-kit/crud-ui` React 组件包

**待完成任务**:
- [ ] React Hooks 实现
- [ ] 列表组件实现 (CRUDList)
- [ ] 表单组件实现 (CRUDForm)
- [ ] 详情组件实现
- [ ] 布局组件实现
- [ ] 组件文档和 Storybook

**预期交付物**:
- `@linch-kit/crud-ui` 包
- 组件文档和 Storybook
- 完整使用示例

#### 2.4 Auth UI 包开发 📋 **依赖: 完成 CRUD UI**
**目标**: 实现 `@linch-kit/auth-ui` 认证 UI 组件

**待完成任务**:
- [ ] 认证组件 (LoginForm, RegisterForm, AuthGuard)
- [ ] 权限门控组件
- [ ] 用户管理界面
- [ ] 多提供商认证支持

**预期交付物**:
- `@linch-kit/auth-ui` 包
- 认证流程文档
- 权限管理界面

### 阶段 3: 插件系统核心 📋 **依赖: 完成阶段 2**

#### 3.1 插件系统包创建
**目标**: 创建 `@linch-kit/plugin-system` 核心包

**待完成任务**:
- [ ] 包结构设计和初始化
- [ ] 插件接口定义
- [ ] 插件注册表实现
- [ ] 生命周期管理器
- [ ] 依赖解析算法
- [ ] 插件发现机制
- [ ] 基础测试框架

**预期交付物**:
- `@linch-kit/plugin-system` 包
- 核心 API 文档
- 基础测试用例

#### 3.2 扩展点系统
**目标**: 实现各种扩展点和钩子系统

**待完成任务**:
- [ ] 数据模型扩展点 (Schema)
- [ ] API 扩展点 (tRPC)
- [ ] UI 视图扩展点 (CRUD)
- [ ] 权限扩展点 (Auth)
- [ ] 钩子系统实现
- [ ] 扩展点注册机制
- [ ] 集成测试

**预期交付物**:
- 完整的扩展点系统
- 钩子通信机制
- 集成测试用例

#### 3.3 事务管理器实现
**目标**: 实现基础的事务协调器

**待完成任务**:
- [ ] 事务协调器核心实现
- [ ] 两阶段提交协议
- [ ] 事务参与者接口
- [ ] 与 Prisma 事务集成
- [ ] 错误处理和恢复
- [ ] 事务测试框架

**预期交付物**:
- 事务管理器实现
- 事务 API 文档
- 事务测试用例

### 阶段 4: 系统集成和优化 📋 **依赖: 完成阶段 3**

#### 4.1 现有系统集成
**目标**: 将插件系统与现有包集成

**待完成任务**:
- [ ] 与 `@linch-kit/core` 集成
- [ ] 与 `@linch-kit/schema` 集成
- [ ] 与 `@linch-kit/auth-core` 集成
- [ ] 与 `@linch-kit/trpc` 集成
- [ ] 与 `@linch-kit/ui` 集成
- [ ] 配置系统更新
- [ ] 端到端测试

**预期交付物**:
- 完整的系统集成
- 集成测试套件
- 更新的配置文档

#### 4.2 CLI 工具扩展
**目标**: 扩展 CLI 支持插件管理

**待完成任务**:
- [ ] 插件管理命令 (install/enable/disable)
- [ ] 插件脚手架工具
- [ ] 插件验证工具
- [ ] 插件测试工具
- [ ] CLI 文档更新

**预期交付物**:
- 扩展的 CLI 工具
- 插件开发工具
- CLI 使用文档

#### 4.3 性能优化和文档
**目标**: 性能优化和文档完善

**待完成任务**:
- [ ] 懒加载优化
- [ ] 缓存机制实现
- [ ] 性能测试和基准
- [ ] 完整文档编写
- [ ] 示例项目创建

**预期交付物**:
- 性能优化报告
- 完整的文档站点
- 示例项目和教程

### 阶段 5: 示例模块和验证 📋 **依赖: 完成阶段 4**

#### 5.1 示例模块开发
**目标**: 创建示例业务模块验证架构

**待完成任务**:
- [ ] 创建示例 WMS 模块
- [ ] 创建示例 CRM 模块
- [ ] 创建示例功能插件
- [ ] 跨模块业务流程实现
- [ ] 事务管理验证

**预期交付物**:
- 示例业务模块
- 跨模块业务流程
- 架构验证报告

#### 5.2 最终测试和发布准备
**目标**: 全面测试和发布准备

**待完成任务**:
- [ ] 全面集成测试
- [ ] 性能压力测试
- [ ] 安全性测试
- [ ] 文档最终审查
- [ ] 发布流程准备

**预期交付物**:
- 测试报告
- 发布版本
- 发布文档

## 📊 里程碑和检查点

### 里程碑 1: 基础设施完成 ✅ **已完成**
- ✅ 权限系统模块化完成
- ✅ CRUD 核心包完成 (包含 tRPC 深度集成)
- ✅ 所有核心包基础功能完成

### 里程碑 2: 功能验证完成 🔄 **进行中**
- 🔄 Starter 应用验证完成
- 📋 tRPC 包功能完整
- 📋 CRUD UI 和 Auth UI 包可用

### 里程碑 3: 插件系统核心完成 📋 **待开始**
- 📋 插件系统包功能完整
- 📋 扩展点系统可用
- 📋 基础事务管理实现

### 里程碑 4: 系统集成完成 📋 **待开始**
- 📋 所有包集成完成
- 📋 CLI 工具扩展完成
- 📋 性能优化完成

### 里程碑 5: 架构验证完成 📋 **待开始**
- 📋 示例模块验证通过
- 📋 全面测试完成
- 📋 发布准备就绪

---

**最后更新**: 2025-06-20  
**相关文档**: [当前进度](./current-progress.md) | [任务优先级](./task-priorities.md)
